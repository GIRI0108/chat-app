<div style="padding:12px;color:#fff;">
  <h3>ðŸŽµ Music Sync</h3>

  <input id="musicUrl" placeholder="MP3 URL" style="width:70%" />
  <button id="musicLoad">Load & Sync</button>

  <div style="margin-top:12px;">
    <audio id="musicPlayer" controls style="width:100%"></audio>
  </div>

  <script>
    function init_private_module_music() {
      const urlEl = document.getElementById("musicUrl");
      const load = document.getElementById("musicLoad");
      const audio = document.getElementById("musicPlayer");

      load.onclick = () => {
        const url = urlEl.value.trim();
        if (!url) return alert("Enter music URL");

        audio.src = url;
        audio.play();
        socket.emit("private:module:start", {conv_id, module:"music", url});
      };

      // remote sync
      window.addEventListener("music:play", () => audio.play());
      window.addEventListener("music:pause", () => audio.pause());
      window.addEventListener("music:seek", (e) => { audio.currentTime = e.detail.timestamp; });

      // local -> broadcast
      audio.addEventListener("play", () => socket.emit("music:play", {conv_id}));
      audio.addEventListener("pause", () => socket.emit("music:pause", {conv_id}));
      audio.addEventListener("seeked", () => socket.emit("music:seek", {conv_id, timestamp: audio.currentTime}));
    }
  </script>
</div>
